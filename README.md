# univercity_practice 

## кейс-задача 4 приложение-опросник для составления анкет

Приложение для создания и проведения опросов. 
Позволяет пользователям регистрироваться, создавать опросы, 
добавлять вопросы и анализировать полученные ответы.

## Требования для запуска

1. Установленный MySQL Server необходимо 
зарегистрироваться и иметь доступ к базе данных.
2. Node.js и npm проверьте установку с помощью 
команд node -v и npm -v.
3. Установленные зависимости node_modules — если их нет
в терминале ввыестикоменду npm install

## Установка базы данных

Зайти в MySQL и выполнить следующий скрипт: 

CREATE DATABASE survey_app;
USE survey_app;

CREATE TABLE Users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL
);

CREATE TABLE Surveys (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    created_by INT NOT NULL,  
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    survey_id INT NOT NULL,
    question_text TEXT NOT NULL,
    type ENUM('text', 'radio', 'checkbox') NOT NULL,
    options TEXT DEFAULT NULL, -- Список вариантов ответа (разделены запятыми)
    FOREIGN KEY (survey_id) REFERENCES Surveys(id) ON DELETE CASCADE
);

CREATE TABLE Responses (
    id INT AUTO_INCREMENT PRIMARY KEY,
    survey_id INT NOT NULL,
    user_id INT NOT NULL,
    submitted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (survey_id) REFERENCES Surveys(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES Users(id) ON DELETE CASCADE
);

CREATE TABLE Answers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    response_id INT NOT NULL,
    question_id INT NOT NULL,
    answer_text TEXT NOT NULL, -- Ответ пользователя
    FOREIGN KEY (response_id) REFERENCES Responses(id) ON DELETE CASCADE,
    FOREIGN KEY (question_id) REFERENCES Questions(id) ON DELETE CASCADE
);

CREATE TABLE Options (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_id INT NOT NULL,
    option_text VARCHAR(255) NOT NULL,
    FOREIGN KEY (question_id) REFERENCES Questions(id) ON DELETE CASCADE
);


## Запуск приложения

Откройте два терминала в VS Code

В первом терминале выполните:
1. cd case-task4/survey-app/survay-app-backend
2. npm start  

Во втором терминале выполните:

1. cd case-task4/survey-app/survay-app-frontend
2. npm start  

Перейдите в браузере по адресу http://localhost:3000.

## Анализ выполненной задачи

Были созданы таблицы, которые хранят информацию 
о пользователях, опросах, вопросах и ответах. 
Также добавлены связи между таблицами, чтобы можно 
было правильно сопоставлять данные.

Написаны маршруты для работы с базой данных, чтобы 
можно было создавать, редактировать, удалять и 
просматривать опросы и ответы.

Сделан удобный интерфейс, где можно создавать опросы, 
заполнять их и просматривать результаты.

Реализована система регистрации и входа, чтобы у 
каждого пользователя был свой личный кабинет и 
доступ только к своим данным.

Добавлена валидация, чтобы нельзя было отправлять 
пустые или некорректные данные, например, отправлять 
пустые вопросы или неправильные ответы.

Сделаны графики и диаграммы, чтобы можно было удобно 
анализировать, как пользователи отвечали на вопросы.

Во время работы былинайдены и исправлены баги: 
ошибки в запросах к базе, некорректное отображение данных.

## Что можно улучшить

Если появляется ошибка, что такой колонки нет, 
нужно проверить, есть ли она в базе, или исправить SQL-запрос.

Нужно убедиться, что у поля user_id есть значение по умолчанию, 
или передавать его вручную при добавлении данных.

Если не удаётся удалить колонку из таблицы, сначала нужно 
удалить связи (внешние ключи), а потом уже саму колонку.

Вместо того чтобы хранить все варианты в одной строке через 
запятую, лучше использовать отдельную таблицу, куда записывать 
каждый вариант отдельно.

Нужно убедиться, что данные передаются правильно, 
особенно при выборе нескольких вариантов ответа 
(чекбоксы и радиокнопки).

Если при просмотре ответов ничего не показывается, 
возможно, данные просто не сгруппированы по вопросам. 
Нужно проверить обработку данных перед рендерингом.

Чтобы всё работало быстрее, стоит добавить индексы в базу, 
уменьшить количество ненужных запросов и следить за нагрузкой 
на сервер.


## кейс-задача 5  приложение - калькулятор расходов/доходов

Приложение для отслеживания расходов. 
Позволяет пользователям добавлять, редактировать 
и удалять свои расходы, 
а также анализировать их с помощью графиков.

## Требования для запуска

1. **Установленный MySQL Server** (необходимо зарегистрироваться 
и знать пароль от MySQL).
2. **Node.js и npm** (проверьте установку с 
помощью `node -v` и `npm -v`).
3. **Установить node-modules командой 
npm install в терминале

## Установка базы данных

1. В MySQL необходимо выполнить следующие команды 
для создания необходимой DB:

CREATE DATABASE EXPENSE;

USE EXPENSE;

CREATE TABLE USERS (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(255) NOT NULL,
    password  VARCHAR(255) NOT NULL
);

CREATE TABLE EXPENSES (
    id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    category VARCHAR(255) NOT NULL,
    created_by INT NOT NULL,
    amount DECIMAL(10,2) NOT NULL,
    CREATED_AT VARCHAR(255) NOT NULL
);

2.В файле server.js найдите строку с "Password" и замените 
её на ваш пароль от MySQL Server.


## Запуск приложения

1. Откройте два терминала в VS Code

2. В первом терминале выполните:
* cd case-task5/expense-app/expense-backend
* npm start


3. Во втором терминале выполните:
* cd case-task5/expense-app/expense-frontend
* npm start  # Запускаем клиентскую часть

4. Перейдите в браузере по адресу http://localhost:3000.

## Лицензия

Свободное использование для учебных целей.


## Анализ выполненной задачи

### Цель проекта

Нужно было создать систему, в которой можно регистрироваться, 
входить в аккаунт, а потом добавлять, удалять и просматривать 
свои расходы.

Для хранения пользователей и их расходов были созданы две таблицы. 
Они связаны между собой, чтобы можно было определять, какие траты 
относятся к какому пользователю. В таблицу расходов добавлено поле 
для хранения суммы.

Был написан сервер, который обрабатывает запросы к базе данных. 
Он позволяет регистрироваться, авторизоваться, добавлять и 
удалять расходы, а также загружать список уже записанных трат.

Чтобы сервер мог взаимодействовать с базой, использовалась 
библиотека для работы с MySQL. Также добавлена очистка соединений 
после выполнения запросов, чтобы не было лишней нагрузки на сервер.

Сделан интерфейс, в котором можно авторизоваться и работать 
с расходами. Для этого написаны формы для ввода данных, 
а также добавлена возможность визуально анализировать расходы с 
помощью графиков.

Чтобы не было проблем, добавлена валидация: проверяется, 
чтобы сумма расхода не была пустой или отрицательной, 
а также чтобы при входе в систему вводились правильные данные.

Во время работы было найдено и исправлено несколько ошибок, 
связанных с тем, как передаются данные в запросах, 
как они отображаются на экране и как сервер работает с базой.


### Что можно улучшить

Сейчас пароли хранятся в открытом виде, что небезопасно. 
Их нужно шифровать перед сохранением.

Иногда при запуске возникает ошибка, если база данных недоступна. 
Нужно добавить обработку, чтобы можно было сразу понять, в чём проблема.

Вместо того чтобы прописывать важные данные (например, пароль к базе) 
прямо в коде, лучше вынести их в отдельный файл настроек.

Нужно заранее проверять, чтобы пользователь вводил корректную 
информацию, а не полагаться на ошибки, которые могут появиться 
уже на сервере.

Вместо того чтобы передавать логин и пароль при каждом 
запросе, можно использовать  JWT токены для аутентификации

Сейчас каждое новое подключение создаётся отдельно, 
что может замедлять работу при большом количестве 
пользователей. Лучше использовать систему управления 
соединениями.

Если что-то идёт не так (например, неправильный 
логин или проблема с подключением), нужно показывать 
пользователю понятное сообщение, а не просто 
техническую ошибку.